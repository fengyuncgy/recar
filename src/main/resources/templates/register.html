<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>客户注册页面</title>
    <link rel="stylesheet" href="layui/css/layui.css" media="all">
    <script src="js/jquery.min.js"></script>
    <script src="layui/layui.js" charset="utf-8"></script>
</head>
<body>


<div style="margin: 50px">
    <h1 style="text-align: center; margin-bottom: 20px">客户注册页面</h1>
<form class="layui-form" action=""> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
    <div class="layui-form-item">
        <label class="layui-form-label">名称</label>
        <div class="layui-input-block">
            <input type="text" name="name" placeholder="请输入名称" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">账号</label>
        <div class="layui-input-block">
            <input type="text" name="account" placeholder="请输入账号" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">密码</label>
        <div class="layui-input-block">
            <input type="password" name="password" placeholder="请输入密码" autocomplete="off" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">联系方式</label>
        <div class="layui-input-block">
            <input type="text" name="tel" placeholder="请输入联系方式" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">性别</label>
        <div class="layui-input-block">
            <input type="radio" name="sex" value="1" title="男" checked>
            <input type="radio" name="sex" value="0" title="女">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">年龄</label>
        <div class="layui-input-block">
            <input type="text" name="age" placeholder="请输入年龄" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit lay-filter="registerBtn" type="button">注册</button>
            <a href="/login"><button type="button" class="layui-btn layui-btn-primary">取消</button></a>
        </div>
    </div>
    <!-- 更多表单结构排版请移步文档左侧【页面元素-表单】一项阅览 -->
</form>
</div>
</body>
<script src="layui.js"></script>
<script>
    layui.use('form', function(){
        var form = layui.form;
        //监听提交
        form.on('submit(registerBtn)', function (data) {

            var val = JSON.stringify(data.field)
            var url = '/customer/save'
            var type = 'post'
            ajaxRequest(url,type,val)
        });
    });
    function ajaxRequest(url,type,data) {
        $.ajax({
            type: type,
            url: url,
            data: data,
            contentType: 'application/json;charset=UTF-8',
            dataType: "json",
            success: function (data) {
                layer.msg(data.message, {
                    time: 0 //不自动关闭
                    , btn: ['确定']
                    , yes: function (index) {
                        layer.close(index);
                        window.location.href = '/login'
                    }
                });

            }
        });
    }
</script>